<Fallback name="NavigateWithRecovery">

  <!-- MAIN NAVIGATION BRANCH -->
  <Sequence name="MainNavigation">
    <ComputePathToPose goal="{goal}" path="{global_path}" planner_id="SpiralSTC"/>
    <FollowPath path="{global_path}" controller_id="FollowPath"/>
  </Sequence>

  <!-- RECOVERY BRANCH IF MAIN PATH FAILS -->
  <Sequence name="RecoveryIfBlocked">
    <GetRobotPose output="{current_pose}"/>
    <FindUnoccupiedWaypoint path="{global_path}" pose="{current_pose}" output="{rejoin_point}"/>
    <ComputePathToPose goal="{rejoin_point}" path="{recovery_path}" planner_id="GridBased"/>
    <FollowPath path="{recovery_path}" controller_id="FollowPath"/>
  </Sequence>

</Fallback>
